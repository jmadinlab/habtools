---
output: github_document
editor_options: 
  chunk_output_type: console
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# habtools

<!-- badges: start -->
[![R-CMD-check](https://github.com/jmadinlab/habtools/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/jmadinlab/habtools/actions/workflows/R-CMD-check.yaml)
<!-- badges: end -->

The goal of `habtools` is to collate tools for 3D meshes and digital elevation models (DEM) targeted at biologists and ecologists. Tools calculate metrics like surface area, rugosity, fractal dimension, height range, convexity, sphericity, second moments of volume and more. The initial set of tools came from two research papers. Zawada et al. (2019) examined morphology of coral colony laser scans. Torres-Pulliza et al. (2020) examined  complexity of coral reef structure. It is hoped that the number of tools and contributors will grow through time.

## Installation

You can install the development version from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("jmadinlab/habtools")
```

## Examples

There are currently two data set accompanying this package. `horseshoe` is a digital elevation model of a reef, and `mcap` is a 3D mesh of a coral growing on a reef. 

The following example calculates height range, rugosity and fractal dimension of a 2 x 2 m plot of reef using the height range method developed in Torres-Pulliza et al. (2020).

```{r example1}
library(habtools)
library(raster)
plot(horseshoe)

# Let's take a subset DEM of size = 2
dem2 <- crop_dem(horseshoe, x0 = -465, y0 = 1265, L = 2, plot = TRUE)
plot(dem2)

# height range
hr(dem2)

# rugosity; note that rugosity will decrease with grain (L0). L0 should always be equal to or greater than the resolution (in this example, the resolution = 0.01). 
rg(dem2, L0 = 0.1)

# fractal dimension
fd(dem2, lvec = c(0.25, 0.5, 1, 2), plot = TRUE, method = "hvar")

```

The next example calculates height range, rugosity and fractal dimension for a 3D mesh of a coral colony. Because meshes can have more than one `z` coordinate for a given `xy` (i.e., they have overhangs), we advise the cube counting fractal dimension method presented in Zawada et al. (2019).

```{r example2}

# height range
hr(mcap)

# rugosity
rg(mcap, L0 = 0.045)

# fractal dimension
fd(mcap, lvec = c(0.045, 0.09, 0.18, 0.5), plot = TRUE, method = "cubes")

```



